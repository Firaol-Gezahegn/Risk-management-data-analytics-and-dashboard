Build a full-featured production-ready Risk Management Dashboard web app for Awash Bank. 
Design requirements:
- Use Awash Bank branding: primary #10047a, secondary #F7923A 
- Provide light + dark themes with a global toggle (dark mode default optional). 
- Modern, minimal corporate style using Tailwind modifiers: rounded-xl, shadow-lg, p-6, transition, duration-300, ease-in-out, text-lg, font-semibold.
- Responsive mobile-first design: single column on mobile, multi-column grid on desktop.
- Use TypeScript + React + Tailwind + React Query + shadcn/ui for components.

High-level features (all in one run):
1) Authentication & Authorization
- Implement JWT-based auth (refresh token rotation) and OAuth2-ready hooks.
- Role-Based Access Control (RBAC) with roles: superadmin, risk_admin, business_user, reviewer, auditor.
- Multi-department permissions: users belong to departments; data access filtered by department and role.
- Secure password policies, MFA support (TOTP), and account management UI.

2) File Upload Ingestion → Database
- File upload module: drag-and-drop CSV/XLSX, client-side preview, validation, schema mapping UI (map columns to DB fields), and error reporting.
- Upload card uses Tailwind: p-6 rounded-xl shadow-md border-dashed hover:shadow-lg.
- Parse and stage data in an ingestion staging table for review before final insert.

3) Database Schema (Postgres / Supabase / SQLite compatible)
Create the following tables (DDL-like spec included):

users(
  id UUID PRIMARY KEY,
  email TEXT UNIQUE,
  name TEXT,
  password_hash TEXT,
  role TEXT,
  department TEXT,
  is_active BOOLEAN,
  mfa_enabled BOOLEAN,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

risk_records(
  id SERIAL PRIMARY KEY,
  risk_type TEXT,
  risk_category TEXT,
  business_unit TEXT,
  department TEXT,
  likelihood NUMERIC,
  impact NUMERIC,
  inherent_risk NUMERIC,    -- likelihood * impact (auto-calc)
  residual_risk NUMERIC,
  risk_score NUMERIC,       -- automated scoring output
  owner_id UUID REFERENCES users(id),
  status TEXT,              -- e.g., Open, Mitigating, Closed
  date_reported DATE,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

ingestion_staging(
  id SERIAL PRIMARY KEY,
  source_file TEXT,
  raw_row JSONB,
  mapped BOOLEAN DEFAULT FALSE,
  mapping_meta JSONB,
  errors JSONB,
  created_at TIMESTAMP
);

audit_logs(
  id SERIAL PRIMARY KEY,
  user_id UUID,
  action TEXT,
  details JSONB,
  created_at TIMESTAMP
);

email_reports(
  id SERIAL PRIMARY KEY,
  name TEXT,
  cron_expr TEXT,
  recipients TEXT[], -- emails
  last_run TIMESTAMP,
  settings JSONB
);

4) CRUD API & Data Access Layer
- Generate CRUD REST API routes: /api/auth, /api/users, /api/risk_records, /api/ingest, /api/reports.
- Use React Query for client fetching hooks (useRiskRecords, useUploadStaging, useAuth).
- API must include RBAC server-side guards and department-based filters.

5) Dashboard Pages & Components
- Fixed sidebar (collapsible) and top navbar (logo, theme toggle, search, profile).
- Pages:
  a) Overview Dashboard: KPI cards (Total risks, High/Medium/Low count), trend line (last 12 months), risk distribution pie, top 5 business-units by risk, recent ingestion activity. Use grid layout: 1 column mobile → 3 columns desktop.
  b) Risk Register: Filter chips (risk type, category, business unit, status), server-side pagination, sortable columns, bulk actions (export, change status), row-level edit/delete.
  c) Add / Edit Risk: Form UX with validations; auto-calc: inherent_risk = likelihood × impact (immediate UI calc); preview risk_score from scoring engine.
  d) File Upload Page: staging preview, mapping UI, validation report, accept/reject staging entries. Save-to-db CTA with confirmation.
  e) Admin: User management, roles, departments, audit logs.
  f) Reports: Schedule email reports (daily/weekly/monthly) and ad-hoc exports (CSV, XLSX, PDF).
  g) Mobile mini-dashboard: compact KPI tiles, recent items, quick upload button.

6) Automated Risk Scoring Engine
- Implement a pluggable scoring engine:
  - Default deterministic score: normalized_score = normalize(likelihood, impact) * weight_factors + business_unit_factor
  - Provide optional ML pipeline hook (Python module) to train model on historical risk_records and loss events. Expose endpoint /api/score that returns risk_score and explanation (shap-lite style or simple feature weights).
- Include model versioning and model metadata in DB (model_name, version, trained_at).

7) Stress Testing & Scenario Hooks (basic)
- Include a scenario manager UI to define simple stress shocks (increase PD proxies: multiply likelihood, increase impact).
- Ability to run a quick scenario applying a shock across selected records and return aggregated results (capital/impact proxies).

8) Notifications & Email Reporting
- Scheduled email reports (cron_expr) with templated PDFs/CSV attachments. Use server-side job runner (node-cron or queue like Bull) and SMTP integration.
- Real-time in-app notifications (websocket or polling) for ingestion errors, threshold breaches, assigned tasks.

9) Auditability & Security
- Full audit trail (audit_logs) for all create/update/delete actions with diffs stored in JSONB.
- Encryption: TLS for transport; at-rest DB encryption recommended for sensitive fields; password hashing with bcrypt/argon2.
- Rate limiting on APIs and strict CORS policy.
- Backup & restore endpoints and daily backup job.

10) Reporting & Visualization
- Charts: line, bar, pie, stacked area using Recharts or similar; no custom colors that break branding—use primary + secondary + neutral palette.
- Export options: CSV/XLSX/PDF for dashboards and registers.
- Interactive filters and drilldown from a chart to filtered table.

11) Developer UX & Code Structure
- Monorepo with clear folders: components/, pages/, hooks/, lib/api/, styles/, models/.
- Reusable components: Card, ChartCard, Table, TableToolbar, FileUploadCard, MapFieldModal, ConfirmationModal.
- Unit & integration tests scaffold (Jest + React Testing Library) and API tests (supertest).
- Dockerfile + docker-compose for local dev (Postgres + app).
- CI pipeline with lint, test, build steps.

12) Accessibility & Theming
- Provide accessible alternatives: keyboard nav, aria labels, focus states, high-contrast theme toggle.
- Ensure color contrast for text and buttons. Use dark mode palettes: 
Final output requirements:
- Generate the whole app scaffold, all pages, components, API routes, DB schema, ingestion logic, auth, RBAC, email scheduler, scoring engine hooks, mobile responsive styles, and tests in a single codebase.
- Include README with setup steps, environment variables (DB, SMTP, JWT secret), and a phased deployment plan.

Design keywords to include in generation: 
"modern, minimal, corporate design, mobile-first, responsive grid, fixed sidebar, dark mode, smooth transitions, Tailwind: rounded-xl shadow-lg p-6 transition duration-300 ease-in-out text-lg font-semibold 
